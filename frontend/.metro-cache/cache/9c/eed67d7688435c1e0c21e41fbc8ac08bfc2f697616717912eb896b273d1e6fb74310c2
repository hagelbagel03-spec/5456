{"dependencies":[{"name":"./polling.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":39,"index":39}}],"key":"Pl+iaQVK3G0OaUHovkJUbWBEusk=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){Object.defineProperty(e,\"__esModule\",{value:!0}),e.Fetch=void 0;var t=r(d[0]);class o extends t.Polling{doPoll(){this._fetch().then(t=>{if(!t.ok)return this.onError(\"fetch read error\",t.status,t);t.text().then(t=>this.onData(t))}).catch(t=>{this.onError(\"fetch read error\",t)})}doWrite(t,o){this._fetch(t).then(t=>{if(!t.ok)return this.onError(\"fetch write error\",t.status,t);o()}).catch(t=>{this.onError(\"fetch write error\",t)})}_fetch(t){var o;const s=void 0!==t,h=new Headers(this.opts.extraHeaders);return s&&h.set(\"content-type\",\"text/plain;charset=UTF-8\"),null===(o=this.socket._cookieJar)||void 0===o||o.appendCookies(h),fetch(this.uri(),{method:s?\"POST\":\"GET\",body:s?t:null,headers:h,credentials:this.opts.withCredentials?\"include\":\"omit\"}).then(t=>{var o;return null===(o=this.socket._cookieJar)||void 0===o||o.parseCookies(t.headers.getSetCookie()),t})}}e.Fetch=o});","lineCount":1,"map":[[1,92,1,0],[1,96,1,0,"_polling"],[1,98,1,0,"r"],[1,100,1,0,"d"],[1,102,1,0],[1,106,11,7],[1,112,11,13,"Fetch"],[1,122,11,27,"Polling"],[1,132,12,4,"doPoll"],[1,141,13,8,"this"],[1,146,13,13,"_fetch"],[1,155,14,13,"then"],[1,160,14,19,"res"],[1,164,15,12],[1,168,15,17,"res"],[1,170,15,21,"ok"],[1,173,16,16],[1,180,16,23,"this"],[1,185,16,28,"onError"],[1,193,16,36],[1,212,16,56,"res"],[1,214,16,60,"status"],[1,221,16,68,"res"],[1,224,18,12,"res"],[1,226,18,16,"text"],[1,233,18,23,"then"],[1,238,18,29,"data"],[1,241,18,38,"this"],[1,246,18,43,"onData"],[1,253,18,50,"data"],[1,259,20,13,"catch"],[1,265,20,20,"err"],[1,269,21,12,"this"],[1,274,21,17,"onError"],[1,282,21,25],[1,301,21,45,"err"],[1,305,23,4],[1,306,24,4,"doWrite"],[1,314,24,12,"data"],[1,316,24,18,"callback"],[1,319,25,8,"this"],[1,324,25,13,"_fetch"],[1,331,25,20,"data"],[1,334,26,13,"then"],[1,339,26,19,"res"],[1,343,27,12],[1,347,27,17,"res"],[1,349,27,21,"ok"],[1,352,28,16],[1,359,28,23,"this"],[1,364,28,28,"onError"],[1,372,28,36],[1,392,28,57,"res"],[1,394,28,61,"status"],[1,401,28,69,"res"],[1,404,30,12,"callback"],[1,410,32,13,"catch"],[1,416,32,20,"err"],[1,420,33,12,"this"],[1,425,33,17,"onError"],[1,433,33,25],[1,453,33,46,"err"],[1,457,35,4],[1,458,36,4,"_fetch"],[1,465,36,11,"data"],[1,468,37,8],[1,472,37,12,"_a"],[1,474,38,8],[1,480,38,14,"isPost"],[1,487,38,32,"undefined"],[1,491,38,23,"data"],[1,493,39,14,"headers"],[1,495,39,24],[1,499,39,28,"Headers"],[1,507,39,36,"this"],[1,512,39,41,"opts"],[1,517,39,46,"extraHeaders"],[1,531,44,8],[1,538,40,12,"isPost"],[1,541,41,12,"headers"],[1,543,41,20,"set"],[1,547,41,24],[1,562,41,40],[1,590,43,42],[1,598,43,9,"_a"],[1,600,43,14,"this"],[1,605,43,19,"socket"],[1,612,43,26,"_cookieJar"],[1,630,43,52,"undefined"],[1,634,43,50,"_a"],[1,637,43,75,"_a"],[1,639,43,78,"appendCookies"],[1,653,43,92,"headers"],[1,656,44,15,"fetch"],[1,662,44,21,"this"],[1,667,44,26,"uri"],[1,673,44,33],[1,674,45,12,"method"],[1,681,45,20,"isPost"],[1,683,45,29],[1,690,45,38],[1,696,46,12,"body"],[1,701,46,18,"isPost"],[1,703,46,27,"data"],[1,705,46,34],[1,710,47,12,"headers"],[1,720,48,12,"credentials"],[1,732,48,25,"this"],[1,737,48,30,"opts"],[1,742,48,35,"withCredentials"],[1,758,48,53],[1,768,48,65],[1,777,49,11,"then"],[1,782,49,17,"res"],[1,786,50,12],[1,790,50,16,"_a"],[1,792,53,12],[1,799,52,46],[1,807,52,13,"_a"],[1,809,52,18,"this"],[1,814,52,23,"socket"],[1,821,52,30,"_cookieJar"],[1,839,52,56,"undefined"],[1,843,52,54,"_a"],[1,846,52,79,"_a"],[1,848,52,82,"parseCookies"],[1,861,52,95,"res"],[1,863,52,99,"headers"],[1,871,52,107,"getSetCookie"],[1,887,53,19,"res"],[1,890,55,4],[1,892,56,1,"e"],[1,894,56,1,"Fetch"],[1,901,56,1],[1,904]],"functionMap":{"names":["<global>","Fetch","Fetch#doPoll","_fetch.then$argument_0","res.text.then$argument_0","_fetch.then._catch$argument_0","Fetch#doWrite","Fetch#_fetch","fetch.then$argument_0"],"mappings":"AAA;OCU;ICC;kBCE;4BCI,2BD;SDC;mBGC;SHE;KDC;IKC;kBHE;SGK;mBDC;SCE;KLC;IMC;gBCa;SDK;KNC;CDC"}},"type":"js/module"}]}